!function(t){var o=6e4,a=function(t){return t.toISOString().replace(/-|:|\.\d+/g,"")},n=function(t){return a(t.end?t.end:new Date(t.start.getTime()+t.duration*o))},e={google:function(t){var o=a(t.start),e=n(t),r=encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text="+(t.title||""),"&dates="+(o||""),"/"+(e||""),"&details="+(t.description||""),"&location="+(t.address||""),"&sprop=&sprop=name:"].join(""))
return'<a class="icon-google add-to-calendar__buttons__button" target="_blank" href="'+r+'">Google</a>'},yahoo:function(t){var n=t.end?(t.end.getTime()-t.start.getTime())/o:t.duration,e=600>n?"0"+Math.floor(n/60):Math.floor(n/60)+"",r=10>n%60?"0"+n%60:n%60+"",d=e+r,i=a(new Date(t.start-t.start.getTimezoneOffset()*o))||"",c=encodeURI(["http://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(t.title||""),"&st="+i,"&dur="+(d||""),"&desc="+(t.description||""),"&in_loc="+(t.address||"")].join(""))
return'<a class="icon-yahoo add-to-calendar__buttons__button" target="_blank" href="'+c+'">Yahoo!</a>'},ics:function(t,o,e){var r=a(t.start),d=n(t),i=encodeURI("data:text/calendar;charset=utf8,"+["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(r||""),"DTEND:"+(d||""),"SUMMARY:"+(t.title||""),"DESCRIPTION:"+(t.description||""),"LOCATION:"+(t.address||""),"END:VEVENT","END:VCALENDAR"].join("\n"))
return'<a class="'+o+'" target="_blank" href="'+i+'">'+e+"</a>"},ical:function(t){return this.ics(t,"icon-ical add-to-calendar__buttons__button","iCal")},outlook:function(t){return this.ics(t,"icon-outlook add-to-calendar__buttons__button","Outlook")}},r=function(t){return{google:e.google(t),yahoo:e.yahoo(t),ical:e.ical(t),outlook:e.outlook(t)}},d=function(t){return void 0!==t.data&&void 0!==t.data.start&&(void 0!==t.data.end||void 0!==t.data.duration)},i=function(t,o,a){var n=document.createElement("div"),e=""
return n.innerHTML='<label for="checkbox-for-'+a+'" class="add-to-calendar-label">Add to calendar</label>',n.innerHTML+='<input name="add-to-calendar-checkbox" class="add-to-calendar-checkbox" id="checkbox-for-'+a+'" type="checkbox">',Object.keys(t).forEach(function(o){e+=t[o]}),n.innerHTML+='<div class="add-to-calendar__buttons">'+e+"</div>",n.className="add-to-calendar",void 0!==o&&(n.className+=" "+o),n.id=a,n},c=function(t){return t.options&&t.options["class"]?t.options["class"]:void 0},s=function(t){return t.options&&t.options.id?t.options.id:Math.floor(1e6*Math.random())}
t.createCalendar=function(t){return d(t)?i(r(t.data),c(t),s(t)):void console.log("Event details missing.")}}(this)
