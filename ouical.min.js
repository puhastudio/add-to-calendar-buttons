!function(t){var o=6e4,e=function(t){return t.toISOString().replace(/-|:|\.\d+/g,"")},a=function(t){return e(t.end?t.end:new Date(t.start.getTime()+t.duration*o))},n={google:function(t){var o=e(t.start),n=a(t),r=encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text="+(t.title||""),"&dates="+(o||""),"/"+(n||""),"&details="+(t.description||""),"&location="+(t.address||""),"&sprop=&sprop=name:"].join(""))
return'<a class="icon-google" target="_blank" href="'+r+'">Google</a>'},yahoo:function(t){var a=t.end?(t.end.getTime()-t.start.getTime())/o:t.duration,n=600>a?"0"+Math.floor(a/60):Math.floor(a/60)+"",r=10>a%60?"0"+a%60:a%60+"",i=n+r,c=e(new Date(t.start-t.start.getTimezoneOffset()*o))||"",d=encodeURI(["http://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(t.title||""),"&st="+c,"&dur="+(i||""),"&desc="+(t.description||""),"&in_loc="+(t.address||"")].join(""))
return'<a class="icon-yahoo" target="_blank" href="'+d+'">Yahoo!</a>'},ics:function(t,o,n){var r=e(t.start),i=a(t),c=encodeURI("data:text/calendar;charset=utf8,"+["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(r||""),"DTEND:"+(i||""),"SUMMARY:"+(t.title||""),"DESCRIPTION:"+(t.description||""),"LOCATION:"+(t.address||""),"END:VEVENT","END:VCALENDAR"].join("\n"))
return'<a class="'+o+'" target="_blank" href="'+c+'">'+n+"</a>"},ical:function(t){return this.ics(t,"icon-ical","iCal")},outlook:function(t){return this.ics(t,"icon-outlook","Outlook")}},r=function(t){return{google:n.google(t),yahoo:n.yahoo(t),ical:n.ical(t),outlook:n.outlook(t)}},i=function(t){return void 0!==t.data&&void 0!==t.data.start&&(void 0!==t.data.end||void 0!==t.data.duration)},c=function(t,o,e){var a=document.createElement("div")
return a.innerHTML='<label for="checkbox-for-'+e+'" class="add-to-calendar-label">Add to calendar</label>',a.innerHTML+='<input name="add-to-calendar-checkbox" class="add-to-calendar-checkbox" id="checkbox-for-'+e+'" type="checkbox">',Object.keys(t).forEach(function(o){a.innerHTML+=t[o]}),a.className="add-to-calendar",void 0!==o&&(a.className+=" "+o),a.id=e,a},d=function(t){return t.options&&t.options["class"]?t.options["class"]:void 0},s=function(t){return t.options&&t.options.id?t.options.id:Math.floor(1e6*Math.random())}
t.createCalendar=function(t){return i(t)?c(r(t.data),d(t),s(t)):void console.log("Event details missing.")}}(this)
